name: My GitHub Action

on:
  push:
    branches:
      - main

jobs:
  run-hjk-test-v1:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v2

    # - name: Set User Information
    #   if: github.event_name == 'push'
    #   id: user_info_push
    #   run: |
    #     USER_NAME=$(git log -1 --pretty=format:'%an')
    #     COMMIT_TIME=$(git log -1 --pretty=format:'%ci')
    #     COMMIT_MESSAGE=$(git log -1 --pretty=format:'%s')
    #     FROM_BRANCH=$(git symbolic-ref --short HEAD)  # Get the current branch name
    #     TO_BRANCH=${GITHUB_REF#refs/heads/}  # Remove the "refs/heads/" prefix from GITHUB_REF
    #     echo "USER_NAME=$USER_NAME" >> $GITHUB_ENV
    #     echo "COMMIT_TIME=$COMMIT_TIME" >> $GITHUB_ENV
    #     echo "COMMIT_MESSAGE=$COMMIT_MESSAGE" >> $GITHUB_ENV
    #     echo "FROM_BRANCH=$FROM_BRANCH" >> $GITHUB_ENV
    #     echo "TO_BRANCH=$TO_BRANCH" >> $GITHUB_ENV
      
    - name: Run hjk-test-v1 action
      uses: hyeonjeong-ko/packiging-test@4.5
      with:
        test-variable: "도커말고 복합으로 해보자....!"
        send-to-function: "send_to_me"
        rest-api-key: "152831f2d43d3d3c3b003a24ec2fa088"
        redirect-uri: "https://localhost:3000"
        code-key: "hq4S9rltefqZZ1dXoF_0F3dn4t-yy7Bq9xSLU12XR8_eOx8Zkflg0q5xKZ7jW6nt5jkyWgo9dJkAAAGKF16tCQ"
        msg-template: "text"

        
        # event_name: ${{ github.event_name }}
        # MERGED_STATUS: ${{ github.event.pull_request.merged }}
        # USER_NAME: $USER_NAME
        # COMMIT_TIME: $COMMIT_TIME
        # COMMIT_MESSAGE: $COMMIT_MESSAGE
        # FROM_BRANCH: $FROM_BRANCH
        # TO_BRANCH: $TO_BRANCH
